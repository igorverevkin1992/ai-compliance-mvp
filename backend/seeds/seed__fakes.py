import os
import uuid
from sqlalchemy import create_engine, text

# –í—Å—Ç–∞–≤—å —Å–≤–æ—é —Å—Å—ã–ª–∫—É Supabase
DATABASE_URL = os.getenv("DATABASE_URL")
engine = create_engine(DATABASE_URL)

def seed_uk_fakes():
    with engine.connect() as conn:
        print("üëÆ‚Äç‚ôÇÔ∏è –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç. 207.3 –£–ö –†–§ (–§–µ–π–∫–∏ –æ–± –∞—Ä–º–∏–∏) –≤ –±–∞–∑—É...")
        
        # 1. –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
        # 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID –≤ Python
        doc_id = uuid.uuid4()
        
        # 2. –ü–µ—Ä–µ–¥–∞–µ–º –µ–≥–æ –≤ –∑–∞–ø—Ä–æ—Å
        conn.execute(text("""
            INSERT INTO legal_doc (id, publisher, title, version) 
            VALUES (:id, '–†–§', '–ù–∞–∑–≤–∞–Ω–∏–µ...', '–≤–µ—Ä—Å–∏—è...')
        """), {"id": doc_id})
        
        requirements = [
            {
                "code": "RF_UK_207_3_ARMY_FAKES",
                "type": "PROHIBITED",
                "risk": "CRITICAL",
                "summary": "–ü—É–±–ª–∏—á–Ω–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–µ–π–∫–æ–≤ –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –í–° –†–§.",
                "text": "–°—Ç–∞—Ç—å—è 207.3 —á.1: –ó–∞–ø—Ä–µ—â–µ–Ω–æ –ø—É–±–ª–∏—á–Ω–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥ –≤–∏–¥–æ–º –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞–≤–µ–¥–æ–º–æ –ª–æ–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, —Å–æ–¥–µ—Ä–∂–∞—â–µ–π –¥–∞–Ω–Ω—ã–µ –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –í–æ–æ—Ä—É–∂–µ–Ω–Ω—ã—Ö –°–∏–ª –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏."
            },
            {
                "code": "RF_UK_207_3_BODIES_FAKES",
                "type": "PROHIBITED",
                "risk": "CRITICAL",
                "summary": "–§–µ–π–∫–∏ –æ –≥–æ—Å–æ—Ä–≥–∞–Ω–∞—Ö –∏ –¥–æ–±—Ä–æ–≤–æ–ª—å—Ü–∞—Ö (–†–æ—Å–≥–≤–∞—Ä–¥–∏—è, –ß–í–ö, –ú–ß–° –∑–∞ —Ä—É–±–µ–∂–æ–º).",
                "text": "–°—Ç–∞—Ç—å—è 207.3 —á.1: –ó–∞–ø—Ä–µ—â–µ–Ω–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ –≥–æ—Å–æ—Ä–≥–∞–Ω–∞–º–∏ –†–§ —Å–≤–æ–∏—Ö –ø–æ–ª–Ω–æ–º–æ—á–∏–π –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–§, –∞ —Ç–∞–∫–∂–µ –æ–± –æ–∫–∞–∑–∞–Ω–∏–∏ –¥–æ–±—Ä–æ–≤–æ–ª—å—á–µ—Å–∫–∏–º–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏ —Å–æ–¥–µ–π—Å—Ç–≤–∏—è –≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞—á –í–° –†–§ –∏–ª–∏ –†–æ—Å–≥–≤–∞—Ä–¥–∏–∏."
            },
            {
                "code": "RF_UK_207_3_HATE_MOTIVE",
                "type": "PROHIBITED",
                "risk": "CRITICAL",
                "summary": "–§–µ–π–∫–∏ –ø–æ –º–æ—Ç–∏–≤–∞–º –Ω–µ–Ω–∞–≤–∏—Å—Ç–∏ –∏–ª–∏ –≤—Ä–∞–∂–¥—ã.",
                "text": "–°—Ç–∞—Ç—å—è 207.3 —á.2 –ø.–¥: –¢–æ –∂–µ –¥–µ—è–Ω–∏–µ, —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–µ –ø–æ –º–æ—Ç–∏–≤–∞–º –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–æ–π, –∏–¥–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π, —Ä–∞—Å–æ–≤–æ–π, –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∏–ª–∏ —Ä–µ–ª–∏–≥–∏–æ–∑–Ω–æ–π –Ω–µ–Ω–∞–≤–∏—Å—Ç–∏ –∏–ª–∏ –≤—Ä–∞–∂–¥—ã. –ù–∞–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏—à–µ–Ω–∏–µ–º —Å–≤–æ–±–æ–¥—ã –¥–æ 10 –ª–µ—Ç."
            },
            {
                "code": "RF_UK_207_3_FALSIFICATION",
                "type": "PROHIBITED",
                "risk": "CRITICAL",
                "summary": "–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ (–î–∏–ø—Ñ–µ–π–∫–∏, –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞).",
                "text": "–°—Ç–∞—Ç—å—è 207.3 —á.2 –ø.–≤: –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–æ–∑–¥–∞–Ω–∏–µ–º –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –æ–±–≤–∏–Ω–µ–Ω–∏—è. –í–ª–µ—á–µ—Ç –ø–æ–≤—ã—à–µ–Ω–Ω—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å."
            }
        ]
        
        for req in requirements:
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID –¥–ª—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
            req_id = uuid.uuid4()

            conn.execute(text("""
                INSERT INTO legal_requirement (id, doc_id, req_code, requirement_type, risk_floor, summary, full_text)
                VALUES (:id, :doc_id, :code, :type, :risk, :summ, :text)
                ON CONFLICT (req_code) DO UPDATE SET full_text = EXCLUDED.full_text
            """), {
                "id": req_id,       # <--- –î–û–ë–ê–í–õ–ï–ù–û
                "doc_id": doc_id,
                "code": req["code"],
                "type": req["type"],
                "risk": req["risk"],
                "summ": req["summary"],
                "text": req["text"]
            })
        
        conn.commit()
        print("‚úÖ –°—Ç–∞—Ç—å—è 207.3 –£–ö –†–§ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞. –ê–≥–µ–Ω—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω –æ–± —É–≥–æ–ª–æ–≤–Ω—ã—Ö —Ä–∏—Å–∫–∞—Ö.")

if __name__ == "__main__":
    seed_uk_fakes()