import os
from sqlalchemy import create_engine, text
import uuid

# –í—Å—Ç–∞–≤—å —Å–≤–æ—é —Å—Å—ã–ª–∫—É Supabase
DATABASE_URL = os.getenv("DATABASE_URL")
engine = create_engine(DATABASE_URL)

def seed_114_law():
    with engine.connect() as conn:
        print("üìñ –ó–∞–≥—Ä—É–∑–∫–∞ –§–ó-114 (–≠–∫—Å—Ç—Ä–µ–º–∏–∑–º) –≤ –±–∞–∑—É...")
        
        # 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID –≤ Python
        doc_id = uuid.uuid4()
        
        # 2. –ü–µ—Ä–µ–¥–∞–µ–º –µ–≥–æ –≤ –∑–∞–ø—Ä–æ—Å
        conn.execute(text("""
            INSERT INTO legal_doc (id, publisher, title, version) 
            VALUES (:id, '–†–§', '–ù–∞–∑–≤–∞–Ω–∏–µ...', '–≤–µ—Ä—Å–∏—è...')
        """), {"id": doc_id})
        
        requirements = [
            {
                "code": "RF_114_EXTREMISM_DEF",
                "type": "PROHIBITED",
                "risk": "CRITICAL",
                "summary": "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–Ω–∞—Å–∏–ª—å—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ—è, —Ç–µ—Ä—Ä–æ—Ä–∏–∑–º, —Ä–æ–∑–Ω—å).",
                "text": "–°—Ç–∞—Ç—å—è 1: –≠–∫—Å—Ç—Ä–µ–º–∏–∑–º –≤–∫–ª—é—á–∞–µ—Ç: –Ω–∞—Å–∏–ª—å—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Å–Ω–æ–≤ –∫–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å—Ç—Ä–æ—è; –ø—É–±–ª–∏—á–Ω–æ–µ –æ–ø—Ä–∞–≤–¥–∞–Ω–∏–µ —Ç–µ—Ä—Ä–æ—Ä–∏–∑–º–∞; –≤–æ–∑–±—É–∂–¥–µ–Ω–∏–µ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π, —Ä–∞—Å–æ–≤–æ–π, –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∏–ª–∏ —Ä–µ–ª–∏–≥–∏–æ–∑–Ω–æ–π —Ä–æ–∑–Ω–∏; –ø—Ä–æ–ø–∞–≥–∞–Ω–¥—É –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–ª–∏ –Ω–µ–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ—Å—Ç–∏ —á–µ–ª–æ–≤–µ–∫–∞ –ø–æ –ø—Ä–∏–∑–Ω–∞–∫—É –µ–≥–æ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π, —Ä–∞—Å–æ–≤–æ–π, –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π, —Ä–µ–ª–∏–≥–∏–æ–∑–Ω–æ–π –∏–ª–∏ —è–∑—ã–∫–æ–≤–æ–π –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏."
            },
            {
                "code": "RF_114_NAZI_SYMBOLS",
                "type": "PROHIBITED",
                "risk": "CRITICAL",
                "summary": "–ó–∞–ø—Ä–µ—Ç –Ω–∞—Ü–∏—Å—Ç—Å–∫–æ–π —Å–∏–º–≤–æ–ª–∏–∫–∏ (—Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –¥–ª—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö/–Ω–∞—É—á–Ω—ã—Ö —Ü–µ–ª–µ–π).",
                "text": "–°—Ç–∞—Ç—å—è 1: –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—Ü–∏—Å—Ç—Å–∫–æ–π –∞—Ç—Ä–∏–±—É—Ç–∏–∫–∏ –∏–ª–∏ —Å–∏–º–≤–æ–ª–∏–∫–∏, –ª–∏–±–æ —Å—Ö–æ–¥–Ω—ã—Ö —Å –Ω–∏–º–∏ –¥–æ —Å—Ç–µ–ø–µ–Ω–∏ —Å–º–µ—à–µ–Ω–∏—è. –ò–°–ö–õ–Æ–ß–ï–ù–ò–ï: —Å–ª—É—á–∞–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –∏–¥–µ–æ–ª–æ–≥–∏–∏ –Ω–∞—Ü–∏–∑–º–∞ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–ø–∞–≥–∞–Ω–¥—ã –∏–ª–∏ –æ–ø—Ä–∞–≤–¥–∞–Ω–∏—è –Ω–∞—Ü–∏–∑–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Ñ–∏–ª—å–º–∞—Ö, —Ö—Ä–æ–Ω–∏–∫–µ)."
            },
            {
                "code": "RF_114_PUBLIC_CALLS",
                "type": "PROHIBITED",
                "risk": "CRITICAL",
                "summary": "–ü—É–±–ª–∏—á–Ω—ã–µ –ø—Ä–∏–∑—ã–≤—ã –∫ —ç–∫—Å—Ç—Ä–µ–º–∏–∑–º—É –∏ –º–∞—Å—Å–æ–≤–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.",
                "text": "–°—Ç–∞—Ç—å—è 1: –ö —ç–∫—Å—Ç—Ä–µ–º–∏–∑–º—É –æ—Ç–Ω–æ—Å—è—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–µ –ø—Ä–∏–∑—ã–≤—ã –∫ –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—é —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –¥–µ—è–Ω–∏–π –ª–∏–±–æ –º–∞—Å—Å–æ–≤–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–≤–µ–¥–æ–º–æ —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –∞ —Ä–∞–≤–Ω–æ –∏—Ö –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –∏–ª–∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ü–µ–ª—è—Ö –º–∞—Å—Å–æ–≤–æ–≥–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è."
            },
            {
                "code": "RF_114_MEDIA_BAN",
                "type": "PROHIBITED",
                "risk": "CRITICAL",
                "summary": "–ó–∞–ø—Ä–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –°–ú–ò –∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –¥–ª—è —ç–∫—Å—Ç—Ä–µ–º–∏–∑–º–∞.",
                "text": "–°—Ç–∞—Ç—å—è 8 –∏ 12: –í –†–§ –∑–∞–ø—Ä–µ—â–∞—é—Ç—Å—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å—Ä–µ–¥—Å—Ç–≤–∞ –º–∞—Å—Å–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ —Å–µ—Ç–∏ —Å–≤—è–∑–∏ (–≤–∫–ª—é—á–∞—è –ò–Ω—Ç–µ—Ä–Ω–µ—Ç) —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏–µ –∏–º–∏ —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏."
            },
            {
                "code": "RF_114_EXTREMIST_ORG_SYMBOLS",
                "type": "PROHIBITED",
                "risk": "CRITICAL",
                "summary": "–°–∏–º–≤–æ–ª–∏–∫–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö (—ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–∏—Ö) –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π.",
                "text": "–°—Ç–∞—Ç—å—è 1: –ó–∞–ø—Ä–µ—â–µ–Ω–∞ —Å–∏–º–≤–æ–ª–∏–∫–∞ –∏–ª–∏ –∞—Ç—Ä–∏–±—É—Ç–∏–∫–∞ —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä—ã—Ö —Å—É–¥–æ–º –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –æ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ –∏–ª–∏ –∑–∞–ø—Ä–µ—Ç–µ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —Å–≤—è–∑–∏ —Å –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏–µ–º —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)."
            }
        ]
        
        for req in requirements:
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID –¥–ª—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
            req_id = uuid.uuid4()

            conn.execute(text("""
                INSERT INTO legal_requirement (id, doc_id, req_code, requirement_type, risk_floor, summary, full_text)
                VALUES (:id, :doc_id, :code, :type, :risk, :summ, :text)
                ON CONFLICT (req_code) DO UPDATE SET full_text = EXCLUDED.full_text
            """), {
                "id": req_id,       # <--- –î–û–ë–ê–í–õ–ï–ù–û
                "doc_id": doc_id,
                "code": req["code"],
                "type": req["type"],
                "risk": req["risk"],
                "summ": req["summary"],
                "text": req["text"]
            })
        
        conn.commit()
        print("‚úÖ –§–ó-114 —É—Å–ø–µ—à–Ω–æ –æ—Ü–∏—Ñ—Ä–æ–≤–∞–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π.")

if __name__ == "__main__":
    seed_114_law()