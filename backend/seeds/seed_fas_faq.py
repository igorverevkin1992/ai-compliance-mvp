import os
from sqlalchemy import create_engine, text
import uuid

# –í—Å—Ç–∞–≤—å —Å–≤–æ—é —Å—Å—ã–ª–∫—É Supabase
DATABASE_URL = os.getenv("DATABASE_URL")
engine = create_engine(DATABASE_URL)

def seed_fas_faq():
    with engine.connect() as conn:
        print("üí° –ó–∞–≥—Ä—É–∑–∫–∞ –†–∞–∑—ä—è—Å–Ω–µ–Ω–∏–π –§–ê–° (FAQ –ø–æ —Ä–µ–∫–ª–∞–º–µ) –≤ –±–∞–∑—É...")
        
        # 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID –≤ Python
        doc_id = uuid.uuid4()
        
        # 2. –ü–µ—Ä–µ–¥–∞–µ–º –µ–≥–æ –≤ –∑–∞–ø—Ä–æ—Å
        conn.execute(text("""
            INSERT INTO legal_doc (id, publisher, title, version) 
            VALUES (:id, '–†–§', '–ù–∞–∑–≤–∞–Ω–∏–µ...', '–≤–µ—Ä—Å–∏—è...')
        """), {"id": doc_id})
        
        requirements = [
            {
                "code": "FAS_OWN_SITE_INFO",
                "type": "PERMITTED",
                "risk": "SAFE",
                "summary": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–≤–æ–∏—Ö —Ç–æ–≤–∞—Ä–∞—Ö –Ω–∞ —Å–≤–æ–µ–º —Å–∞–π—Ç–µ/—Å–æ—Ü—Å–µ—Ç–∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∫–ª–∞–º–æ–π.",
                "text": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–∞ —Å–∞–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è –∏–ª–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞ –æ —Ç–æ–≤–∞—Ä–∞—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞/—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –≤ –µ–¥–∏–Ω–æ–º —Å—Ç–∏–ª–µ –¥–ª—è –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏—è —Å –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–æ–º, –ù–ï —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∫–ª–∞–º–æ–π –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏."
            },
            {
                "code": "FAS_MARKETPLACE_INFO",
                "type": "PERMITTED",
                "risk": "SAFE",
                "summary": "–ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞—Ö –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Ä–µ–∫–ª–∞–º–æ–π.",
                "text": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞—Ö –æ —Ç–æ–≤–∞—Ä–∞—Ö —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–¥–∞–≤—Ü–æ–≤, —Ä–∞–∑–º–µ—â–µ–Ω–Ω–∞—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ, –Ω–æ—Å–∏—Ç —Å–ø—Ä–∞–≤–æ—á–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∫–ª–∞–º–æ–π."
            },
            {
                "code": "FAS_PINNED_BANNER",
                "type": "RESTRICTED",
                "risk": "MEDIUM",
                "summary": "–°–∫–≤–æ–∑–Ω–æ–π –∏–ª–∏ –≤—Å–ø–ª—ã–≤–∞—é—â–∏–π –±–∞–Ω–Ω–µ—Ä –Ω–∞ —Å–∞–π—Ç–µ –ø—Ä–∏–∑–Ω–∞–µ—Ç—Å—è —Ä–µ–∫–ª–∞–º–æ–π.",
                "text": "–ï—Å–ª–∏ —Å–≤–µ–¥–µ–Ω–∏—è –æ —Ç–æ–≤–∞—Ä–µ –≤–∏–∑—É–∞–ª—å–Ω–æ –≤—ã–¥–µ–ª—è—é—Ç—Å—è (–∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–π –±–∞–Ω–Ω–µ—Ä, –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ), –ø—Ä–µ—Å–ª–µ–¥—É—é—Ç —Ü–µ–ª—å –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö, —ç—Ç–æ –ø—Ä–∏–∑–Ω–∞–µ—Ç—Å—è –†–ï–ö–õ–ê–ú–û–ô –∏ —Ç—Ä–µ–±—É–µ—Ç –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏."
            },
            {
                "code": "FAS_VACANCY_AD",
                "type": "PERMITTED",
                "risk": "SAFE",
                "summary": "–û–±—ä—è–≤–ª–µ–Ω–∏—è –æ –≤–∞–∫–∞–Ω—Å–∏—è—Ö –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Ä–µ–∫–ª–∞–º–æ–π.",
                "text": "–û–±—ä—è–≤–ª–µ–Ω–∏—è –æ –ø—Ä–∏–µ–º–µ –Ω–∞ —Ä–∞–±–æ—Ç—É –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Ä–µ–∫–ª–∞–º–æ–π, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å —É—Å–ª–æ–≤–∏—è–º–∏ —Ç—Ä—É–¥–∞."
            },
            {
                "code": "FAS_GIVEAWAY_OWN",
                "type": "PERMITTED",
                "risk": "SAFE",
                "summary": "–†–æ–∑—ã–≥—Ä—ã—à –ø—Ä–∏–∑–æ–≤ –Ω–∞ —Å–≤–æ–µ–º —Ä–µ—Å—É—Ä—Å–µ - –Ω–µ —Ä–µ–∫–ª–∞–º–∞.",
                "text": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–æ–∑—ã–≥—Ä—ã—à–µ –ø—Ä–∏–∑–æ–≤ —Å—Ä–µ–¥–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞, –≥–¥–µ –ø—Ä–∏–∑ –æ–ø–∏—Å–∞–Ω –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ (–±–µ–∑ –≤–æ—Å—Ö–≤–∞–ª–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤), —è–≤–ª—è–µ—Ç—Å—è —Å–ø—Ä–∞–≤–æ—á–Ω–æ–π –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏."
            },
            {
                "code": "FAS_GIVEAWAY_THIRD_PARTY",
                "type": "MANDATORY",
                "risk": "HIGH",
                "summary": "–†–æ–∑—ã–≥—Ä—ã—à —á—É–∂–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∏–ª–∏ –ø—Ä–∏–∑—ã–≤ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–ø–æ–Ω—Å–æ—Ä–∞ - —Ä–µ–∫–ª–∞–º–∞.",
                "text": "–ü—Ä–∏–∑—ã–≤ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —á—É–∂–æ–π –∫–∞–Ω–∞–ª –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤ —Ç–æ–≤–∞—Ä–∞-–ø—Ä–∏–∑–∞ –æ—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è –Ø–í–õ–Ø–ï–¢–°–Ø —Ä–µ–∫–ª–∞–º–æ–π –∏ —Ç—Ä–µ–±—É–µ—Ç –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏."
            },
            {
                "code": "FAS_PARTNERS_SECTION",
                "type": "PERMITTED",
                "risk": "SAFE",
                "summary": "–†–∞–∑–¥–µ–ª '–ù–∞—à–∏ –ø–∞—Ä—Ç–Ω–µ—Ä—ã' –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∫–ª–∞–º–æ–π.",
                "text": "–†–∞–∑–º–µ—â–µ–Ω–∏–µ –ª–æ–≥–æ—Ç–∏–ø–æ–≤ —Å–ø–æ–Ω—Å–æ—Ä–æ–≤ –∏ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ —Å–∞–π—Ç–∞ –Ω–æ—Å–∏—Ç —Å–ø—Ä–∞–≤–æ—á–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –Ω–µ –ø—Ä–∏–∑–Ω–∞–µ—Ç—Å—è —Ä–µ–∫–ª–∞–º–æ–π."
            }
        ]
        
        for req in requirements:
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID –¥–ª—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
            req_id = uuid.uuid4()

            conn.execute(text("""
                INSERT INTO legal_requirement (id, doc_id, req_code, requirement_type, risk_floor, summary, full_text)
                VALUES (:id, :doc_id, :code, :type, :risk, :summ, :text)
                ON CONFLICT (req_code) DO UPDATE SET full_text = EXCLUDED.full_text
            """), {
                "id": req_id,       # <--- –î–û–ë–ê–í–õ–ï–ù–û
                "doc_id": doc_id,
                "code": req["code"],
                "type": req["type"],
                "risk": req["risk"],
                "summ": req["summary"],
                "text": req["text"]
            })
        
        conn.commit()
        print("‚úÖ –†–∞–∑—ä—è—Å–Ω–µ–Ω–∏—è –§–ê–° —É—Å–ø–µ—à–Ω–æ –æ—Ü–∏—Ñ—Ä–æ–≤–∞–Ω—ã.")

if __name__ == "__main__":
    seed_fas_faq()