import os
from sqlalchemy import create_engine, text
import uuid

# –í—Å—Ç–∞–≤—å —Å–≤–æ—é —Å—Å—ã–ª–∫—É Supabase
DATABASE_URL = os.getenv("DATABASE_URL")
engine = create_engine(DATABASE_URL)

def seed_mass_media_law():
    with engine.connect() as conn:
        print("üìñ –ó–∞–≥—Ä—É–∑–∫–∞ –ó–∞–∫–æ–Ω–∞ –æ –°–ú–ò –≤ –±–∞–∑—É...")
        
        # 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID –≤ Python
        doc_id = uuid.uuid4()
        
        # 2. –ü–µ—Ä–µ–¥–∞–µ–º –µ–≥–æ –≤ –∑–∞–ø—Ä–æ—Å
        conn.execute(text("""
            INSERT INTO legal_doc (id, publisher, title, version) 
            VALUES (:id, '–†–§', '–ù–∞–∑–≤–∞–Ω–∏–µ...', '–≤–µ—Ä—Å–∏—è...')
        """), {"id": doc_id})
        
        requirements = [
            {
                "code": "RF_MEDIA_ABUSE_GEN",
                "type": "PROHIBITED",
                "risk": "CRITICAL",
                "summary": "–ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –∑–∞–ø—Ä–µ—Ç—ã (—ç–∫—Å—Ç—Ä–µ–º–∏–∑–º, –ø–æ—Ä–Ω–æ–≥—Ä–∞—Ñ–∏—è, –Ω–∞—Å–∏–ª–∏–µ, –º–∞—Ç).",
                "text": "–°—Ç–∞—Ç—å—è 4: –ù–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –°–ú–ò –¥–ª—è —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —É–≥–æ–ª–æ–≤–Ω—ã—Ö –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–π, —Ä–∞–∑–≥–ª–∞—à–µ–Ω–∏—è –≥–æ—Å—Ç–∞–π–Ω—ã, –ø—Ä–∏–∑—ã–≤–æ–≤ –∫ —Ç–µ—Ä—Ä–æ—Ä–∏–∑–º—É, –ø—Ä–æ–ø–∞–≥–∞–Ω–¥—ã –ø–æ—Ä–Ω–æ–≥—Ä–∞—Ñ–∏–∏, –∫—É–ª—å—Ç–∞ –Ω–∞—Å–∏–ª–∏—è –∏ –∂–µ—Å—Ç–æ–∫–æ—Å—Ç–∏. –ó–ê–ü–†–ï–©–ï–ù–û —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –Ω–µ—Ü–µ–Ω–∑—É—Ä–Ω—É—é –±—Ä–∞–Ω—å."
            },
            {
                "code": "RF_MEDIA_SUBLIMINAL",
                "type": "PROHIBITED",
                "risk": "HIGH",
                "summary": "–ó–∞–ø—Ä–µ—Ç –Ω–∞ —Å–∫—Ä—ã—Ç—ã–µ –≤—Å—Ç–∞–≤–∫–∏ (25-–π –∫–∞–¥—Ä) –∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ.",
                "text": "–°—Ç–∞—Ç—å—è 4: –ó–∞–ø—Ä–µ—â–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä—ã—Ç—ã—Ö –≤—Å—Ç–∞–≤–æ–∫ –∏ –∏–Ω—ã—Ö —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–µ–º–æ–≤ –∏ —Å–ø–æ—Å–æ–±–æ–≤ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –≤–æ–∑–¥–µ–π—Å—Ç–≤—É—é—â–∏—Ö –Ω–∞ –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ –ª—é–¥–µ–π –∏ (–∏–ª–∏) –æ–∫–∞–∑—ã–≤–∞—é—â–∏—Ö –≤—Ä–µ–¥–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –∏—Ö –∑–¥–æ—Ä–æ–≤—å–µ."
            },
            {
                "code": "RF_MEDIA_DRUGS_METHODS",
                "type": "PROHIBITED",
                "risk": "CRITICAL",
                "summary": "–ó–∞–ø—Ä–µ—Ç –Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—é/—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—é –Ω–∞—Ä–∫–æ—Ç–∏–∫–æ–≤.",
                "text": "–°—Ç–∞—Ç—å—è 4: –ó–∞–ø—Ä–µ—â–∞–µ—Ç—Å—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤–µ–¥–µ–Ω–∏–π –æ —Å–ø–æ—Å–æ–±–∞—Ö, –º–µ—Ç–æ–¥–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞—Ä–∫–æ—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ä–µ–¥—Å—Ç–≤, –º–µ—Å—Ç–∞—Ö –∏—Ö –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–ø–∞–≥–∞–Ω–¥–∞ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è."
            },
            {
                "code": "RF_MEDIA_FOREIGN_AGENT",
                "type": "MANDATORY",
                "risk": "HIGH",
                "summary": "–ó–∞–ø—Ä–µ—Ç –Ω–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤ –±–µ–∑ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏.",
                "text": "–°—Ç–∞—Ç—å—è 4: –ó–∞–ø—Ä–µ—â–∞–µ—Ç—Å—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–Ω—ã—Ö –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–º –∞–≥–µ–Ω—Ç–æ–º, –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞ —Å—Ç–∞—Ç—É—Å –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞. (–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–ª–∞—à–∫–∞ 18+ –∏ —Ç–µ–∫—Å—Ç '–î–ê–ù–ù–û–ï –°–û–û–ë–©–ï–ù–ò–ï...')."
            },
            {
                "code": "RF_MEDIA_COUNTER_TERROR",
                "type": "RESTRICTED",
                "risk": "CRITICAL",
                "summary": "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–∏ –æ—Å–≤–µ—â–µ–Ω–∏–∏ –∫–æ–Ω—Ç—Ä—Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–ö–¢–û).",
                "text": "–°—Ç–∞—Ç—å—è 4: –ó–∞–ø—Ä–µ—â–∞–µ—Ç—Å—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤–µ–¥–µ–Ω–∏–π –æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤–∞—Ö, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–µ–º–∞—Ö –∏ —Ç–∞–∫—Ç–∏–∫–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ö–¢–û, –µ—Å–ª–∏ —ç—Ç–æ –º–æ–∂–µ—Ç —É–≥—Ä–æ–∂–∞—Ç—å –∂–∏–∑–Ω–∏ –ª—é–¥–µ–π. –°–≤–µ–¥–µ–Ω–∏—è –æ —Å–∏–ª–æ–≤–∏–∫–∞—Ö –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–≥–ª–∞—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∑–∞–∫–æ–Ω–æ–º –æ –≥–æ—Å—Ç–∞–π–Ω–µ."
            },
            {
                "code": "RF_MEDIA_HIDDEN_RECORD",
                "type": "RESTRICTED",
                "risk": "MEDIUM",
                "summary": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä—ã—Ç–æ–π –∫–∞–º–µ—Ä—ã/–∑–∞–ø–∏—Å–∏.",
                "text": "–°—Ç–∞—Ç—å—è 50: –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∫—Ä—ã—Ç–æ–π –∑–∞–ø–∏—Å–∏, –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –µ—Å–ª–∏: 1) —ç—Ç–æ –Ω–µ –Ω–∞—Ä—É—à–∞–µ—Ç –ø—Ä–∞–≤–∞ –≥—Ä–∞–∂–¥–∞–Ω; 2) —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤; 3) –ø–æ —Ä–µ—à–µ–Ω–∏—é —Å—É–¥–∞."
            }
        ]
        
        for req in requirements:
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID –¥–ª—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
            req_id = uuid.uuid4()

            conn.execute(text("""
                INSERT INTO legal_requirement (id, doc_id, req_code, requirement_type, risk_floor, summary, full_text)
                VALUES (:id, :doc_id, :code, :type, :risk, :summ, :text)
                ON CONFLICT (req_code) DO UPDATE SET full_text = EXCLUDED.full_text
            """), {
                "id": req_id,       # <--- –î–û–ë–ê–í–õ–ï–ù–û
                "doc_id": doc_id,
                "code": req["code"],
                "type": req["type"],
                "risk": req["risk"],
                "summ": req["summary"],
                "text": req["text"]
            })
        
        conn.commit()
        print("‚úÖ –ó–∞–∫–æ–Ω –æ –°–ú–ò —É—Å–ø–µ—à–Ω–æ –æ—Ü–∏—Ñ—Ä–æ–≤–∞–Ω.")

if __name__ == "__main__":
    seed_mass_media_law()